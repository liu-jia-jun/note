# 谷粒商城



## Liunx的使用





## 人人开源







## 后端数据校验---JSR303

## Spring-cloud-Alibaba



### 配置中心

> 1. 在使用 nacos 作为配置中心是  DataID的值需要是 注意 dataID 的默认组成规则
>
> 





### Gateway

#### 在配置路由规则时,发现无法正确跳转

> 1. 首先我们要确定这个服务是否正确启动
>2. 在配置路由规则的predicates时 这个Path是要配置的,否则可能无法跳转
> 3. 在配置这个Path的值时 , 我们最好要配置一个存在的URL路径 否则会报 404 Not Found

```
spring:
  application:
    name: gulimall-gateway
  cloud:
    gateway:
      routes:
        - id: test-router
          uri: https://www.baidu.com/
          predicates:
            - Path=/
            - Query=key,value
```



#### 网关转发

>
>
>当我们在使用gateway网关与前端项目进行联调的时候 ,需要保证 前端设置的转发端口与gateway网关端口相同

```
spring.application.name=gulimall-gateway
server.port=88
 
 // 这里的baseUrl的端口号 需要与 网关服务的端口号保持一致 , 因为我们是发送请求给网关 , 之后通过网关统一转发请求到相应的服务中去
  window.SITE_CONFIG['baseUrl'] = 'http://localhost:88/api'
```



#### 网关的优先级

>当我们在配置网关的时候 , 如果有两个路由 一个范围较大 , 一个范围较小 且 范围大的路由包含了范围较小的网关 , 此时需要将范围较大的路由 写在后面 范围较小的路由放在前面
>
>如果不这么放会出现 发送一个请求被范围较大的路由捕获到并转发 此时是错误的转发 , 因为在读取配置文件的时候 是从上往下读取 所以我们需要将较小范围的 路由放到范围较大的 路由的前面





## ERROR



###  Chrome 浏览器出现 ERR_UNSAFE_PORT 问题的解决方法



>1. 写了一个新的 Spring Boot 工程，工程端口号定义为 6667。工程启动正常，但在 Chrome 浏览器中输入访问地址出现 ERR_UNSAFE_PORT 错误。字面意思是不安全的端口号。
>
>2. Chrome 浏览器定义了一些内置端口，如果要访问的地址端口号与这些内置端口相同，就会出现ERR_UNSAFE_PORT 问题。
>3. 解决办法 : 更换工程应用的端口号。（推荐）



##### config 与 nacos 



>Caused by: com.alibaba.nacos.api.exception.NacosException: endpoint is blank
>
> 
>
>如果一个项目中引入了 springcloud 阿里巴巴的nacos作为配置中心 , 和 注册中心  , 那么他们的配置要写完全
>
>那么配置文件application.yml中就必须把注册以及config配置中心配置信息都写上，但是如果只是单纯的用nacos做服务注册与发现的话，可以把config的依赖给删掉，不然项目启动就会报此错，如上pom.xml文件里，已经把config依赖注释掉，项目正常启动
